(function(o,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(o=typeof globalThis<"u"?globalThis:o||self,n(o.highlightInput={},o.Vue))})(this,function(o,n){"use strict";const _=["innerHTML"],h={name:"HighlightInput"},x=n.defineComponent({...h,props:{modelValue:{type:String,default:""},keywords:{type:Array,default:[]},color:{type:String,default:"#F56C6C"}},emits:["update:modelValue"],setup(i,{emit:s}){const l=i,r=n.ref(""),a=n.ref();let d=!1;n.watch(()=>l.modelValue,e=>{f(e)});const C=e=>e.replace(/[\-\/\\\^\$\*\+\?\.\(\)\|\[\]\{\}]/g,"\\$&"),w=(e,t)=>{if(!e)return"";const c=new RegExp(t.map(p=>C(String(p).trim())).join("|"),"gi");return e.replace(/\t/g,"").replace(c,"	$&	").split(/\t/).map((p,I)=>I%2===0?p:`<span style="color: ${l.color}">${p}</span>`).join("")},S=e=>{if(window.getSelection){e.focus();let t=window.getSelection();t.selectAllChildren(e),t.collapseToEnd()}else if(document.selection){let t=document.selection.createRange();t.moveToElementText(e),t.collapse(!1),t.select()}},k=(e,t)=>{let c=null;return(...g)=>{c&&(clearTimeout(c),c=null),c=setTimeout(()=>{e.apply(this,g)},t)}},f=async e=>{r.value=w(e,l.keywords),await n.nextTick(),S(a.value)},v=k(f,300),E=()=>{d=!0},H=e=>{d=!1,m(e)},m=e=>{if(!d){let t=e.target.textContent;s("update:modelValue",String(t)),v(t)}};return(e,t)=>(n.openBlock(),n.createElementBlock("div",{ref_key:"inputDom",ref:a,innerHTML:r.value,class:"highlight-input",onInput:m,onCompositionstart:E,onCompositionend:H,contenteditable:"true"},null,40,_))}}),V="",u=((i,s)=>{const l=i.__vccOpts||i;for(const[r,a]of s)l[r]=a;return l})(x,[["__scopeId","data-v-0cec6f78"]]),y=[u],T={install(i){y.forEach(s=>{i.component(s.name,u)})}};o.HighlightInput=u,o.default=T,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
